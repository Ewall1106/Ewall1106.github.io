(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{259:function(t,v,_){"use strict";_.r(v);var e=_(28),s=Object(e.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("blockquote",[_("p",[t._v("前言：上一章讲了vuex的安装及引入，这章讲下vuex中操作的几个方法"),_("strong",[t._v("Dispatch")]),t._v("、"),_("strong",[t._v("Commit")]),t._v("等，完成整个vuex操作的小循环。\nGitHub：https://github.com/Ewall1106/mall（选择分支chapter34）")])]),t._v(" "),_("p",[t._v("我再贴一下这张图，我们按照这个顺序讲解：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adb06f9a36?w=701&h=551&f=png&s=28627",alt:"截图来自vuex官网"}})]),t._v(" "),_("h3",{attrs:{id:"_1、dispatch"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1、dispatch"}},[t._v("#")]),t._v(" 1、Dispatch")]),t._v(" "),_("p",[t._v("首先我们讲在组件中分发 "),_("code",[t._v("Action")]),t._v("，使用的是"),_("code",[t._v("dispatch")]),t._v("这个方法。也就是说如果你想在组件中改变"),_("code",[t._v("vuex")]),t._v("仓库的值，可以使用这个方法。")]),t._v(" "),_("p",[t._v("（1）首先我们再新建一个"),_("code",[t._v("testCity.vue")]),t._v("的文件并与"),_("code",[t._v("test.vue")]),t._v("形成互为父子页面，作为我们这几章vuex初探的案例测试页面。")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adb5a0fec8?w=785&h=605&f=png&s=80493",alt:"新建testCity页面"}})]),t._v(" "),_("p",[t._v("（2）然后我们在"),_("code",[t._v("testCity")]),t._v("页面中用"),_("code",[t._v("dispatch")]),t._v("方法分发"),_("code",[t._v("action")])]),t._v(" "),_("ul",[_("li",[t._v("先简单布局一下（选择列表+提交按钮）")]),t._v(" "),_("li",[t._v("添加一个点击事件，当点击提交的时候将选择的值作为"),_("code",[t._v("dispatch")]),t._v("的参数")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adb6225e32?w=848&h=807&f=png&s=121471",alt:"dispatch分发action"}})]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adb2ffdc78?w=388&h=111&f=png&s=1247",alt:"基本布局样式"}})]),t._v(" "),_("p",[t._v("（3）ok，接下来我们就应该是在store仓库中"),_("strong",[t._v("注册")]),_("code",[t._v("actions")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adb90b593a?w=761&h=665&f=png&s=62081",alt:"注册"}})]),t._v(" "),_("h3",{attrs:{id:"_2、commit"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2、commit"}},[t._v("#")]),t._v(" 2、Commit")]),t._v(" "),_("blockquote",[_("p",[t._v("Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用"),_("code",[t._v("context.commit")]),t._v("提交一个 mutation。")])]),t._v(" "),_("p",[t._v("（1）接着上面的来，我们在"),_("code",[t._v("changeCity")]),t._v("事件中提交一个"),_("code",[t._v("mutation")])]),t._v(" "),_("ul",[_("li",[t._v("第一个参数是"),_("code",[t._v("context")]),t._v("对象；")]),t._v(" "),_("li",[t._v("第二个参数是接收组件"),_("code",[t._v("dispatch")]),t._v("传过来的"),_("code",[t._v("city")]),t._v("值")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adbb4644c6?w=849&h=615&f=png&s=66942",alt:"commit提交mutation"}})]),t._v(" "),_("p",[t._v("这样，我们就提交了一个mutation。")]),t._v(" "),_("h3",{attrs:{id:"_3、mutate"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3、mutate"}},[t._v("#")]),t._v(" 3、Mutate")]),t._v(" "),_("blockquote",[_("p",[t._v("更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。")])]),t._v(" "),_("p",[t._v("终于，到了这一步我们就可以进行"),_("code",[t._v("state")]),t._v("状态的变更了（这一步就是可以改变state的值）")]),t._v(" "),_("ul",[_("li",[t._v("我们先注册一个"),_("code",[t._v("mutations")]),t._v("；")]),t._v(" "),_("li",[t._v("新建"),_("code",[t._v("commit")]),t._v("提交的事件，第一个参数为"),_("code",[t._v("state")]),t._v("，第二个为"),_("code",[t._v("commit")]),t._v("传过来的"),_("code",[t._v("city")]),t._v("值：")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353adde51cfa0?w=828&h=654&f=png&s=77195",alt:"修改state中的值"}})]),t._v(" "),_("h3",{attrs:{id:"_4、小结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4、小结"}},[t._v("#")]),t._v(" 4、小结")]),t._v(" "),_("p",[t._v("最后，当你改变了"),_("code",[t._v("state")]),t._v("的值以后，vue就会自动"),_("code",[t._v("render")]),t._v("重新渲染组件视图，从而完成开篇图1234步骤中的整个小循环。\n这样，本章我们就对vuex有了一个初步的了解了，最后看看实现的效果：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/1/171353ade602e943?w=379&h=672&f=gif&s=56963",alt:"本章效果展示"}})])])}),[],!1,null,null,null);v.default=s.exports}}]);