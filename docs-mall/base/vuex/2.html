<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手把手教你搭建vue小商城</title>
    <meta name="description" content="手把手教你搭建vue小商城">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/docs-mall/favicon.ico">
    
    <link rel="preload" href="/docs-mall/assets/css/0.styles.c63a0327.css" as="style"><link rel="preload" href="/docs-mall/assets/js/app.9ec1cb3c.js" as="script"><link rel="preload" href="/docs-mall/assets/js/2.4592fa53.js" as="script"><link rel="preload" href="/docs-mall/assets/js/19.7e416287.js" as="script"><link rel="prefetch" href="/docs-mall/assets/js/10.7541bc2c.js"><link rel="prefetch" href="/docs-mall/assets/js/11.4698993b.js"><link rel="prefetch" href="/docs-mall/assets/js/12.cc4d373c.js"><link rel="prefetch" href="/docs-mall/assets/js/13.15322211.js"><link rel="prefetch" href="/docs-mall/assets/js/14.7fc9c673.js"><link rel="prefetch" href="/docs-mall/assets/js/15.2b5dca7e.js"><link rel="prefetch" href="/docs-mall/assets/js/16.ad1e31c9.js"><link rel="prefetch" href="/docs-mall/assets/js/17.358464d4.js"><link rel="prefetch" href="/docs-mall/assets/js/18.4a07bc7e.js"><link rel="prefetch" href="/docs-mall/assets/js/20.73ce6762.js"><link rel="prefetch" href="/docs-mall/assets/js/21.e9b44a36.js"><link rel="prefetch" href="/docs-mall/assets/js/3.24086fb4.js"><link rel="prefetch" href="/docs-mall/assets/js/4.36bfb526.js"><link rel="prefetch" href="/docs-mall/assets/js/5.bb0685b0.js"><link rel="prefetch" href="/docs-mall/assets/js/6.1694d393.js"><link rel="prefetch" href="/docs-mall/assets/js/7.9acfb6f1.js"><link rel="prefetch" href="/docs-mall/assets/js/8.6602b574.js"><link rel="prefetch" href="/docs-mall/assets/js/9.e297df27.js">
    <link rel="stylesheet" href="/docs-mall/assets/css/0.styles.c63a0327.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs-mall/" class="home-link router-link-active"><!----> <span class="site-name">手把手教你搭建vue小商城</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/nb/41890709" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack从0到1
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/panda-utils" target="_blank" rel="noopener noreferrer" class="nav-link external">
  panda-utils
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/create-panda-app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  create-panda-app
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/panda-vue-template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  panda-vue-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Ewall1106/mall" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/nb/41890709" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack从0到1
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/panda-utils" target="_blank" rel="noopener noreferrer" class="nav-link external">
  panda-utils
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/create-panda-app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  create-panda-app
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Ewall1106/panda-vue-template" target="_blank" rel="noopener noreferrer" class="nav-link external">
  panda-vue-template
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Ewall1106/mall" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础部分</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/docs-mall/base/init/rem-vw" class="sidebar-heading clickable open"><span>初始化配置</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-mall/base/init/rem-vw.html" class="sidebar-link">移动端适配</a></li><li><a href="/docs-mall/base/init/styles.html" class="sidebar-link">样式相关</a></li><li><a href="/docs-mall/base/init/vant.html" class="sidebar-link">vant引入及使用</a></li></ul></section></li><li><a href="/docs-mall/base/axios/1.html" class="sidebar-link">axios的使用</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/docs-mall/base/proxy/yapi" class="sidebar-heading clickable"><span>代理转发</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-mall/base/proxy/yapi.html" class="sidebar-link">数据mock</a></li><li><a href="/docs-mall/base/proxy/mock.html" class="sidebar-link">跨域与代理转发</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/docs-mall/base/user/skeleton" class="sidebar-heading clickable"><span>用户体验</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-mall/base/user/skeleton.html" class="sidebar-link">骨架屏</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/docs-mall/base/common/clipboard" class="sidebar-heading clickable"><span>常用功能</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-mall/base/common/clipboard.html" class="sidebar-link">复制粘贴</a></li><li><a href="/docs-mall/base/common/scroll.html" class="sidebar-link">scroll滑动</a></li></ul></section></li><li><a href="/docs-mall/base/eslint/basic.html" class="sidebar-link">eslint</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶部分</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-mall/advanced/model/v-model.html" class="sidebar-link">v-model本质</a></li><li><a href="/docs-mall/advanced/keep-alive/keep-alive.html" class="sidebar-link">keep-alive</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>前言：上一章讲了vuex的安装及引入，这章讲下vuex中操作的几个方法<strong>Dispatch</strong>、<strong>Commit</strong>等，完成整个vuex操作的小循环。
GitHub：https://github.com/Ewall1106/mall（选择分支chapter34）</p></blockquote> <p>我再贴一下这张图，我们按照这个顺序讲解：</p> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adb06f9a36?w=701&amp;h=551&amp;f=png&amp;s=28627" alt="截图来自vuex官网"></p> <h3 id="_1、dispatch"><a href="#_1、dispatch" class="header-anchor">#</a> 1、Dispatch</h3> <p>首先我们讲在组件中分发 <code>Action</code>，使用的是<code>dispatch</code>这个方法。也就是说如果你想在组件中改变<code>vuex</code>仓库的值，可以使用这个方法。</p> <p>（1）首先我们再新建一个<code>testCity.vue</code>的文件并与<code>test.vue</code>形成互为父子页面，作为我们这几章vuex初探的案例测试页面。</p> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adb5a0fec8?w=785&amp;h=605&amp;f=png&amp;s=80493" alt="新建testCity页面"></p> <p>（2）然后我们在<code>testCity</code>页面中用<code>dispatch</code>方法分发<code>action</code></p> <ul><li>先简单布局一下（选择列表+提交按钮）</li> <li>添加一个点击事件，当点击提交的时候将选择的值作为<code>dispatch</code>的参数</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adb6225e32?w=848&amp;h=807&amp;f=png&amp;s=121471" alt="dispatch分发action"></p> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adb2ffdc78?w=388&amp;h=111&amp;f=png&amp;s=1247" alt="基本布局样式"></p> <p>（3）ok，接下来我们就应该是在store仓库中<strong>注册</strong><code>actions</code></p> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adb90b593a?w=761&amp;h=665&amp;f=png&amp;s=62081" alt="注册"></p> <h3 id="_2、commit"><a href="#_2、commit" class="header-anchor">#</a> 2、Commit</h3> <blockquote><p>Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用<code>context.commit</code>提交一个 mutation。</p></blockquote> <p>（1）接着上面的来，我们在<code>changeCity</code>事件中提交一个<code>mutation</code></p> <ul><li>第一个参数是<code>context</code>对象；</li> <li>第二个参数是接收组件<code>dispatch</code>传过来的<code>city</code>值</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adbb4644c6?w=849&amp;h=615&amp;f=png&amp;s=66942" alt="commit提交mutation"></p> <p>这样，我们就提交了一个mutation。</p> <h3 id="_3、mutate"><a href="#_3、mutate" class="header-anchor">#</a> 3、Mutate</h3> <blockquote><p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。</p></blockquote> <p>终于，到了这一步我们就可以进行<code>state</code>状态的变更了（这一步就是可以改变state的值）</p> <ul><li>我们先注册一个<code>mutations</code>；</li> <li>新建<code>commit</code>提交的事件，第一个参数为<code>state</code>，第二个为<code>commit</code>传过来的<code>city</code>值：</li></ul> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353adde51cfa0?w=828&amp;h=654&amp;f=png&amp;s=77195" alt="修改state中的值"></p> <h3 id="_4、小结"><a href="#_4、小结" class="header-anchor">#</a> 4、小结</h3> <p>最后，当你改变了<code>state</code>的值以后，vue就会自动<code>render</code>重新渲染组件视图，从而完成开篇图1234步骤中的整个小循环。
这样，本章我们就对vuex有了一个初步的了解了，最后看看实现的效果：</p> <p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171353ade602e943?w=379&amp;h=672&amp;f=gif&amp;s=56963" alt="本章效果展示"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/2/2020, 12:30:35 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs-mall/assets/js/app.9ec1cb3c.js" defer></script><script src="/docs-mall/assets/js/2.4592fa53.js" defer></script><script src="/docs-mall/assets/js/19.7e416287.js" defer></script>
  </body>
</html>
